A somewhat important part of red team operations is hash cracking. We can use hashcat or johntheripper to crack a provided hash by comparing it against a provided wordlist such as rockyou.txt. In this task, we will be using the power of google colab to crack hashes for us.  

From google colaboratory, "Colaboratory, or "Colab" for short, allows you to write and execute Python in your browser" This means that we can take advantage of it with pre-built workspaces to install and run hashcat on google's cloud infrastructure and crack our hashes with a high-end GPU.  

To begin using colabcat, we will need to identify the Hashcat mode to use against the hashes. The shadow file uses the generic Linux hash `$6$`; this is a sha512crypt, which we can identify as mode 1800. For more information about hashcat types, check out the hashcat example page, [https://hashcat.net/wiki/doku.php?id=example_hashes](https://hashcat.net/wiki/doku.php?id=example_hashes).  

Now we can use the colabcat repo, [https://github.com/someshkar/colabcat](https://github.com/someshkar/colabcat), to start up a colab instance with the hashcat settings pre-prepared.  

**Note:** To use colabcat you will first need a google account.  

To begin preparing the instance, you need to follow the prompts and execute the pre-set commands in each box. Find an example of running pre-set commands below.

![[Taask 22 - Crack all the Things-20240926144953629.webp]]

Continue following the prompts to authorize your google account to connect to the colab instance. The below box is the step at which we can change the commands to crack our hashes.  

![[Taask 22 - Crack all the Things-20240926145010770.webp]]

To begin cracking your hash, place the shadow hash inside of `/root/.hashcat/hashes/shadow.hash`. You can then specify the wordlist you would like to use to crack the hash; we recommend using rockyou.txt, to begin.


---

# Your job

- Get the `passwd` and `shadow` files.
- Copy the content and paste it on a file on the attacking machine.
- Do the same with the `shadow` file.
- Once you have both files, we can run the `unshadowed` command which formats the 2 files into a single file ready for `hashcat` or `john`.
	`unshadow passwd shadow >> unshadowed.txt`

## Cracking passwords with john

`john unshadowed.txt --wordlist=/usr/share/wordlists/rockyou.txt`

**linuxrulez** is the only password that drops out, this is for the **linux-admin** user, entering this is enough to complete this section.

## Answer the questions

> What is the plaintext cracked password from the shadow hash? `linuxrulez`

**Next step:** [[Task 23 - Digging a tunnel to nowhere]]
